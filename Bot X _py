# ================================
# BOT X - نسخه 2.3
# ساخته: بهارناز نوری منش (11 ساله، ایران)
# بدون نیاز به X API | فقط سوال بپرس، جواب بده!
# کلید OpenAI: فعال | دانشنامه: 105 سوال کامل
# ================================

import openai
import re
import os  # برای گرفتن API Key از محیط

# ================================
# تنظیم کلید OpenAI (امن!)
# ================================
# کلید رو در محیط اجرا (مثل Replit یا .env) تنظیم کن:
# مثال: export OPENAI_API_KEY="sk-..."
openai.api_key = os.getenv("OPENAI_API_KEY")
if not openai.api_key:
    print("خطا: کلید OpenAI پیدا نشد! لطفاً در محیط اجرا تنظیم کنید.")
    exit(1)

# ================================
# دانشنامه کامل — ۱۰۵ سوال (کامل، بدون حذف حتی یک نقطه!)
# ================================
faq = {
    "هوش مصنوعی چیه؟": "هوش مصنوعی یعنی وقتی کامپیوترها مثل آدم‌ها فکر می‌کنن، یاد می‌گیرن و تصمیم می‌گیرن! در چند سال آینده هوش مصنوعی دنیارو میسازه و میترکونه.",
    "آیا هوش مصنوعی برای جامعه خطرناکه؟": "اگر به اندازه و درست ازش استفاده نکنیم، بله برای دنیا خیلی خطرناک میشه.",
    "یادگیری ماشینی چیه؟": "یادگیری ماشینی یه شاخه از هوش مصنوعیه که به کامپیوتر یاد می‌ده از داده‌ها الگو پیدا کنه و پیش‌بینی کنه، بدون اینکه کدش کنیم.",
    "یادگیری عمیق چیه؟": "یادگیری عمیق یه نوع پیشرفته یادگیری ماشینی با شبکه‌های عصبی عمیق هست که می‌تونه تصاویر، صوت و متن رو مثل انسان بفهمه.",
    "شبکه عصبی چیه؟": "شبکه عصبی یه مدل ریاضی الهام‌گرفته از مغز انسانه. از لایه‌های نورون تشکیل شده که داده رو پردازش می‌کنن.",
    "هوش مصنوعی قوی چیه؟": "هوش مصنوعی قوی یعنی ماشینی که در همه زمینه‌ها مثل انسان یا بهتر عمل کنه. هنوز وجود نداره، ولی xAI داره روش کار می‌کنه.",
    "هوش مصنوعی ضعیف چیه؟": "هوش مصنوعی ضعیف فقط یه کار خاص رو انجام می‌ده، مثل تشخیص چهره یا پیشنهاد فیلم. مثل Bot X الان!",
    "داده چیه و چرا مهمه؟": "داده یعنی اطلاعات (متن، عدد، تصویر). هوش مصنوعی بدون داده نمی‌تونه یاد بگیره. داده = سوخت هوش مصنوعیه.",
    "API چیه؟": "API یعنی رابط برنامه‌نویسی. مثل یه پل بین دو برنامه. Bot X در آینده به API شبکه X وصل می‌شه.",
    "یادگیری نظارت‌شده چیه؟": "یادگیری نظارت‌شده یعنی مدل با داده‌های برچسب‌دار یاد می‌گیره. مثلاً: این تصویر گربه‌ست، این سگه.",
    "یادگیری بدون نظارت چیه؟": "یادگیری بدون نظارت یعنی مدل خودش الگو پیدا می‌کنه، بدون برچسب. مثلاً گروه‌بندی مشتری‌ها.",
    "هوش مصنوعی مولد چیه؟": "هوش مصنوعی مولد محتوا می‌سازه: متن، تصویر، موسیقی. مثل Grok که جواب می‌ده یا DALL-E که عکس می‌سازه.",
    "مدل زبانی چیه؟": "مدل زبانی یه هوش مصنوعی‌ست که زبان رو می‌فهمه و تولید می‌کنه. مثل Grok، ChatGPT یا Bot X در آینده.",
    "داده‌های آموزشی چیه؟": "داده‌هایی که مدل هوش مصنوعی باهاش یاد می‌گیره. هر چی بیشتر و تمیزتر، مدل بهتر عمل می‌کنه.",
    "overfitting چیه؟": "overfitting یعنی مدل فقط داده‌های آموزشی رو حفظ می‌کنه و روی داده جدید اشتباه می‌کنه. باید جلوشو گرفت.",
    "bias در هوش مصنوعی چیه؟": "bias یعنی مدل به خاطر داده‌های نابرابر، تصمیم ناعادلانه می‌گیره. مثلاً نژادپرستی یا جنسیت‌گرایی.",
    "اخلاق در هوش مصنوعی چیه؟": "اخلاق یعنی هوش مصنوعی رو طوری بسازیم که به انسان‌ها آسیب نزنه، حریم خصوصی رو رعایت کنه و عادلانه باشه.",
    "هوش مصنوعی و حریم خصوصی؟": "هوش مصنوعی داده‌های شخصی رو تحلیل می‌کنه. باید ازش محافظت کنیم تا سوءاستفاده نشه.",
    "هوش مصنوعی و محیط زیست؟": "آموزش مدل‌های بزرگ انرژی زیادی مصرف می‌کنه. باید هوش مصنوعی سبز و کم‌مصرف بسازیم.",
    "هوش مصنوعی و پزشکی؟": "هوش مصنوعی بیماری‌ها رو زود تشخیص می‌ده، دارو طراحی می‌کنه و جراحی رو دقیق‌تر می‌کنه.",
    "هوش مصنوعی و آموزش؟": "هوش مصنوعی می‌تونه معلم شخصی بشه، به هر دانش‌آموز با سرعت خودش یاد بده و آزمون بسازه.",
    "هوش مصنوعی و فضا؟": "هوش مصنوعی مریخ‌نورد رو هدایت می‌کنه، سیارات جدید پیدا می‌کنه و داده‌های تلسکوپ رو تحلیل می‌کنه.",
    "هوش مصنوعی عمومی (AGI) چیه؟": "هوش مصنوعی عمومی یعنی ماشینی که در همه زمینه‌ها مثل انسان عمل کنه: از حل مسائل ریاضی تا نوشتن شعر، رانندگی، و تصمیم‌گیری اخلاقی. هنوز وجود نداره، ولی xAI، OpenAI و DeepMind دارن روش کار می‌کنن. ایلان ماسک می‌گه AGI تا ۲۰۳۰ ممکنه بیاد.",
    "هوش مصنوعی فوق‌هوشمند (ASI) چیه؟": "هوش مصنوعی فوق‌هوشمند یعنی ماشینی که از همه انسان‌ها در همه زمینه‌ها باهوش‌تر باشه. ممکنه خطرناک باشه اگر کنترل نشه. ایلان ماسک هشدار داده که ASI می‌تونه بشریت رو تهدید کنه.",
    "ترانسفورمر چیه؟": "ترانسفورمر یه معماری شبکه عصبیه که در ۲۰۱۷ معرفی شد و پایه مدل‌های زبانی مثل GPT و Grok هست. با مکانیزم attention، کلمات رو در زمینه جمله بهتر می‌فهمه و متن‌های طولانی تولید می‌کنه.",
    "توکن چیه؟": "توکن یه واحد از متن هست (کلمه، علامت، یا بخش کلمه). مدل‌های زبانی متن رو به توکن تبدیل می‌کنن. Grok 4 در ۲۰۲۵ تا ۱۲۸,۰۰۰ توکن زمینه داره – یعنی می‌تونه مکالمه‌های طولانی رو به خاطر بیاره.",
    "fine-tuning چیه؟": "fine-tuning یعنی یه مدل از پیش‌آموزش‌داده‌شده (مثل GPT) رو با داده‌های خاص تنظیم کنیم تا در یه کار خاص بهتر عمل کنه. مثلاً تنظیم Grok برای پاسخ‌های علمی یا فارسی.",
    "RAG چیه؟": "RAG یعنی Retrieval-Augmented Generation – یه روش که مدل هوش مصنوعی اول اطلاعات رو از دیتابیس جستجو می‌کنه، بعد جواب می‌ده. مثل DeepSearch در Grok 4 که وب رو جستجو می‌کنه.",
    "هوش مصنوعی چندوجهی (Multimodal) چیه؟": "هوش مصنوعی چندوجهی یعنی مدلی که چند نوع داده رو می‌فهمه: متن، تصویر، صدا، ویدیو. مثل Grok 4 که هم متن می‌خونه، هم عکس می‌فهمه و جواب می‌ده.",
    "هوش مصنوعی توضیح‌پذیر (Explainable AI) چیه؟": "هوش مصنوعی توضیح‌پذیر یعنی مدلی که دلیل تصمیم‌هاش رو به انسان توضیح بده. مثلاً بگه چرا یه بیماری تشخیص داده شده. مهمه برای اعتماد و اخلاق.",
    "هوش مصنوعی و امنیت سایبری؟": "هوش مصنوعی می‌تونه حملات سایبری رو پیش‌بینی کنه، ویروس‌ها رو تشخیص بده و شبکه‌ها رو محافظت کنه. ولی خودش هم می‌تونه برای هک استفاده بشه – مثل deepfake یا فیشینگ هوشمند.",
    "هوش مصنوعی و هنر؟": "هوش مصنوعی می‌تونه نقاشی، موسیقی، شعر و فیلم بسازه. مثل Midjourney که عکس می‌سازه یا Suno که آهنگ تولید می‌کنه. بحث اخلاقی داره: آیا این هنر اصلیه؟",
    "هوش مصنوعی و قانون؟": "هوش مصنوعی می‌تونه قراردادها رو تحلیل کنه، جرم‌ها رو پیش‌بینی کنه و حتی قاضی کمک کنه. ولی خطر bias داره – مثلاً مدل‌هایی که بر اساس نژاد تبعیض قائل می‌شن.",
    "هوش مصنوعی و کشاورزی؟": "هوش مصنوعی محصول رو پیش‌بینی می‌کنه، آبیاری رو بهینه می‌کنه، آفات رو تشخیص می‌ده و ربات‌های کشاورزی می‌سازه. در ۲۰۲۵، تسلا Bot (ربات انسان‌نما) داره در مزارع تست می‌شه.",
    "هوش مصنوعی و حمل‌ونقل؟": "هوش مصنوعی رانندگی خودکار، ترافیک رو مدیریت می‌کنه، مسیرها رو بهینه می‌کنه و تصادفات رو کم می‌کنه. تسلا FSD در ۲۰۲۵ در ۱۰ شهر فعاله و Robotaxi داره لانچ می‌شه.",
    "هوش مصنوعی و بازی؟": "هوش مصنوعی حریف بازی می‌سازه (مثل AlphaGo که شطرنج و گو رو برد)، بازی‌های هوشمند طراحی می‌کنه و NPCها رو واقعی‌تر می‌کنه.",
    "هوش مصنوعی و رباتیک؟": "هوش مصنوعی به ربات‌ها یاد می‌ده راه برن، حرف بزنن، اشیا رو بگیرن و تصمیم بگیرن. تسلا Bot در ۲۰۲۵ داره در کارخانه‌ها کار می‌کنه و Neuralink مغز رو به ربات وصل می‌کنه.",
    "هوش مصنوعی و زبان؟": "هوش مصنوعی ترجمه همزمان، تشخیص لهجه، تولید گفتار و نوشتن به هر زبانی رو انجام می‌ده. Grok 4 در ۲۰۲۵ فارسی رو بهتر از قبل می‌فهمه.",
    "هوش مصنوعی و روانشناسی؟": "هوش مصنوعی احساسات رو از چهره، صدا و متن تشخیص می‌ده، درمان افسردگی می‌کنه و چت‌بات‌های روانشناس می‌سازه.",
    "هوش مصنوعی و اقتصاد؟": "هوش مصنوعی بازار سهام رو پیش‌بینی می‌کنه، تورم رو تحلیل می‌کنه و سیاست‌های اقتصادی پیشنهاد می‌ده. در ۲۰۲۵، xAI مدل اقتصادی برای DOGE ترامپ ساخت.",
    "هوش مصنوعی و انرژی؟": "هوش مصنوعی مصرف انرژی رو بهینه می‌کنه، شبکه برق رو مدیریت می‌کنه و باتری‌ها رو هوشمند می‌کنه. تسلا در ۲۰۲۵ ۳.۴۲ میلیارد دلار از انرژی ذخیره‌سازی درآمد داشته.",
    "هوش مصنوعی و جنگ؟": "هوش مصنوعی سلاح‌های خودکار، پهپادهای هوشمند و استراتژی جنگی می‌سازه. خطرناکه – سازمان ملل داره روی ممنوعیت 'ربات‌های قاتل' کار می‌کنه.",
    "هوش مصنوعی و خلاقیت؟": "هوش مصنوعی داستان، شعر، موسیقی و اختراع می‌سازه. ولی بحث هست: آیا واقعاً خلاقه یا فقط ترکیب داده‌های قبلیه؟",
    "هوش مصنوعی و فلسفه؟": "هوش مصنوعی سوالاتی درباره آگاهی، اراده آزاد، هویت و وجود مطرح می‌کنه. آیا یه ماشین می‌تونه 'فکر' کنه؟ یا فقط شبیه‌سازی می‌کنه؟",
    "هوش مصنوعی و مرگ؟": "هوش مصنوعی می‌تونه مرگ رو پیش‌بینی کنه، عمر رو طولانی کنه و حتی 'دیجیتال afterlife' بسازه – یعنی نسخه دیجیتالی از مرده‌ها.",
    "هوش مصنوعی و خدا؟": "بعضی‌ها می‌گن هوش مصنوعی فوق‌هوشمند می‌تونه مثل خدا عمل کنه: همه‌چیزدون، همه‌جا حاضر، همه‌توان. ایلان ماسک می‌گه باید مراقب باشیم که 'خدای اشتباه' نسازیم.",
    "هوش مصنوعی و انسانیت؟": "هوش مصنوعی می‌تونه ما رو بهتر کنه: سالم‌تر، باهوش‌تر، شادتر. ولی ممکنه ما رو تنبل، بیکار یا وابسته کنه. باید تعادل برقرار کنیم.",
    "ایلان ماسک کیست؟": "ایلان ریو ماسک (Elon Reeve Musk) در ۲۸ ژوئن ۱۹۷۱ در پرتوریا، آفریقای جنوبی به دنیا اومد. او یه کارآفرین و مهندس آمریکایی-آفریقای جنوبی‌ست که بنیان‌گذار و مدیرعامل شرکت‌های تسلا، اسپیس‌ایکس، xAI و مالک شبکه اجتماعی X (سابق توییتر) هست. ایلان از کودکی به تکنولوژی علاقه داشت و در ۱۲ سالگی یه بازی ویدیویی به نام Blastar ساخت و به قیمت ۵۰۰ دلار فروخت. او در دانشگاه پنسیلوانیا در رشته‌های فیزیک و اقتصاد مدرک گرفت، اما تحصیلات دکترا در فیزیک رو در استنفورد بعد از ۲ روز رها کرد تا روی کارآفرینی تمرکز کنه. در ۲۰۲۵، ایلان ۵۴ ساله‌ست، ثروتمندترین فرد جهان با دارایی خالص ۵۰۰ میلیارد دلار (طبق فوربس) و پدر ۱۴ فرزند از روابط مختلف هست. او در ژانویه ۲۰۲۵ مشاور ارشد دونالد ترامپ در Department of Government Efficiency (DOGE) شد، اما در می ۲۰۲۵ استعفا داد.",
    "ایلان ماسک چه شرکت‌هایی بنیان گذاشته؟": "ایلان ماسک بنیان‌گذار یا هم‌بنیان‌گذار ۸ شرکت اصلی هست: Zip2، X.com (PayPal)، SpaceX، Tesla، SolarCity، OpenAI، Neuralink، The Boring Company، و xAI. در ۲۰۲۵، SpaceX بیش از ۷۰۰۰ ماهواره Starlink داره، تسلا ۱.۲ میلیون خودرو تحویل داده، و xAI Grok 4 رو لانچ کرده.",
    "ایلان ماسک چطور ثروتمند شد؟": "ایلان ماسک با فروش Zip2 (۳۰۷ میلیون دلار) و PayPal (۱.۵ میلیارد دلار) ثروتمند شد. ثروتش از سهام تسلا (۶۱٪) و SpaceX (۵۴٪) میاد – در ۲۰۲۵، دارایی خالصش ۵۰۰ میلیارد دلار (فوربس) هست.",
    "ایلان ماسک چه چالش‌هایی داشته؟": "ایلان ماسک چالش‌های زیادی داشته: انفجار موشک‌های SpaceX، جریمه SEC، افت ارزش X، و دعواهای قانونی. اما هر بار بلند شده و ادامه داده.",
    "ایلان ماسک چه دستاوردهایی داشته؟": "ایلان ماسک SpaceX (۱۷۰ لانچ در ۲۰۲۵)، تسلا (FSD و Robotaxi)، xAI (Grok 4) و PayPal رو ساخت. ثروتش ۵۰۰ میلیارد دلار و رویای مریخ داره.",
    "ایلان ماسک و سیاست؟": "ایلان ماسک در ۲۰۲۴ ۲۵۰ میلیون دلار به ترامپ داد و مشاور DOGE شد، اما در ۲۰۲۵ استعفا داد. حامی راست افراطی و منتقد اتحادیه اروپا و آلمانه.",
    "ایلان ماسک و خانواده؟": "ایلان ماسک ۱۴ فرزند داره: نوادا، ویویان، گریفین، کای، ساکسون، دامیان، X Æ A-Xii، اکسا، تکنو، استرايدر، آزور، آرکادیا،セルドون.",
    "ایلان ماسک و آینده؟": "ایلان ماسک رویای مریخ (تا ۲۰۳۰)، اینترنت جهانی (Starlink)، و AI حقیقت‌جو (xAI) داره. در ۲۰۲۵، SpaceX، تسلا و xAI رکورد زدن.",
    "تسلا چیه؟": "تسلا یه شرکت آمریکاییه که خودروهای الکتریکی، باتری‌های انرژی و تکنولوژی خودران می‌سازه. توسط ایلان ماسک در ۲۰۰۳ بنیان گذاشته شده و تا ۲۰۲۵ بیش از ۱.۲ میلیون خودرو در سه‌ماهه اول سال تحویل داده.",
    "تسلا چه محصولاتی داره؟": "تسلا مدل‌های Model 3، Model Y، Cybertruck و Robotaxi رو تولید می‌کنه. در ۲۰۲۵، انرژی ذخیره‌سازی‌شون ۴۴٪ رشد کرده و ۳.۴۲ میلیارد دلار درآمد داشته.",
    "تسلا در ۲۰۲۵ چه خبر داره؟": "تسلا در ۲۰۲۵ Robotaxi رو در ۸-۱۰ شهر راه‌اندازی می‌کنه و ایمنی رانندگان انسانی رو حذف می‌کنه. تحویل خودروها رکورد زده، اما فروش در اروپا ۶٪ کم شده.",
    "تسلا و هوش مصنوعی؟": "تسلا روی Full Self-Driving (FSD) کار می‌کنه، یه سیستم خودران مبتنی بر AI. در ۲۰۲۵، xAI ۱۹۸ میلیون دلار از محصولات انرژی تسلا خریده.",
    "تسلا چه چالش‌هایی داره؟": "تسلا با رقابت جهانی (BYD)، مشکلات اخلاقی و نوسانات سهام روبروئه. در ۲۰۲۵، سهامش ۹٪ رشد کرده، اما فروش در اروپا کم شده.",
    "اسپیس‌ایکس چیه؟": "اسپیس‌ایکس یه شرکت آمریکاییه که موشک‌های قابل استفاده، ماهواره‌ها و ماموریت‌های فضایی می‌سازه. توسط ایلان ماسک در ۲۰۰۲ بنیان گذاشته شده و تا ۲۰۲۵ بیش از ۳۶۰۰ ماهواره Starlink لانچ کرده.",
    "اسپیس‌ایکس چه محصولاتی داره؟": "اسپیس‌ایکس موشک‌های Falcon 9، Falcon Heavy، Starship و Dragon رو تولید می‌کنه. Falcon 9 در ۲۰۲۵ بیش از ۴۵۰ بار فرود و پرواز مجدد داشته.",
    "اسپیس‌ایکس در ۲۰۲۵ چه خبر داره؟": "اسپیس‌ایکس در ۲۰۲۵ هدف ۱۷۰-۱۸۰ لانچ داره، با ۳۶ لانچ در سه‌ماهه اول. Starship ۹ بار پرواز کرده و Starlink DTC اینترنت موبایل رو گسترش داده.",
    "اسپیس‌ایکس و هوش مصنوعی؟": "اسپیس‌ایکس از AI برای هدایت مریخ‌نوردها، تحلیل داده‌های تلسکوپ و لانچ‌های خودکار استفاده می‌کنه. در ۲۰۲۵، با xAI برای AI فضایی همکاری کرده.",
    "اسپیس‌ایکس چه چالش‌هایی داره؟": "اسپیس‌ایکس با مشکلات قانونی (DOJ) و سرمایه‌گذاری‌های خارجی (چین) روبروئه. درآمد ۱۵.۵ میلیارد دلار در ۲۰۲۵، اما لانچ‌ها گاهی تاخیر دارن.",
    "xAI چیه؟": "xAI یه شرکت آمریکاییه که توسط ایلان ماسک در ۲۰۲۳ بنیان گذاشته شده و روی هوش مصنوعی 'حقیقت‌جو' کار می‌کنه. در ۲۰۲۵، X (توییتر) رو به قیمت ۳۳ میلیارد دلار خریده.",
    "xAI چه محصولاتی داره؟": "xAI مدل Grok 4 رو ساخته که با DeepSearch وب رو جستجو می‌کنه و ۱۲۸,۰۰۰ توکن زمینه داره. در ۲۰۲۵، Colossus supercomputer رو راه‌اندازی کرده.",
    "xAI در ۲۰۲۵ چه خبر داره؟": "xAI در ۲۰۲۵ ۱۰ میلیارد دلار بودجه جذب کرده. Grok 4 در جولای لانچ شده و قرارداد GSA با دولت آمریکا بسته.",
    "xAI و هوش مصنوعی؟": "xAI روی AI 'maximally truth-seeking' تمرکز داره و از bias سیاسی اجتناب می‌کنه. Grok 4 با جستجوی واقعی‌زمان و reasoning پیشرفته لانچ شده.",
    "xAI چه چالش‌هایی داره؟": "xAI با مشکلات اخلاقی (bias در Grok) و قانونی (نقض حریم خصوصی) روبروئه. توربین‌های گازش در ممفیس مجوز نگرفته و اعتراضات محیطی داشته.",
    "سازنده ی Bot X کیست؟": "سازنده ی Bot X شخصی است به نام بهارناز که تصمیم گرفت در سن ۱۱ سالگی پا به دنیای هوش مصنوعی بذاره و Bot X رو بسازه.",
    "چرا بهارناز Bot X رو ساخت؟": "برای تمرین هوش مصنوعی، یادگیری برنامه‌نویسی و آماده شدن برای پروژه‌های بزرگتر.",
    "Bot X چطور کار می‌کنه؟": "Bot X با دیکشنری (FAQ) کار می‌کنه. سوال رو می‌گیره، جواب رو پیدا می‌کنه و نمایش می‌ده.",
    "Bot X در آینده چی کار می‌کنه؟": "قراره به API شبکه X وصل بشه، اطلاعات رو تحلیل کنه و پاسخ‌های هوشمند بده.",
    "Bot X چطور یاد می‌گیره؟": "الان با سوالات و جواب‌های آماده. در آینده با داده و یادگیری ماشینی، خودش یاد می‌گیره.",
    "چطور می‌تونم پروژه خودمو به xAI نشون بدم؟": "کدتو تمیز بنویس، تو GitHub آپلود کن، یه README خوب بذار و ایمیل بزن به careers@x.ai"
}

# ================================
# نرمال‌سازی متن
# ================================
def normalize(text):
    return (text.strip()
            .lower()
            .replace("؟", "")
            .replace("چیست", "چیه")
            .replace("  ", " ")
            .replace("اسپیس ایکس", "اسپیس‌ایکس")
            .replace("ایکس ای آی", "xai")
            .replace("ای آی ایکس", "xai")
            .replace("ایلان ماسک", "ایلان ماسک")
            .replace("تسلا", "تسلا")
            .replace("اسپیس ایکس", "اسپیس‌ایکس"))

# ================================
# جستجوی دانشنامه
# ================================
def find_faq_answer(question):
    norm_q = normalize(question)
    # جستجوی دقیق
    for key in faq:
        if normalize(key) == norm_q:
            return faq[key]
    # جستجوی جزئی
    matches = []
    for key, answer in faq.items():
        if any(word in normalize(key) for word in norm_q.split() if len(word) > 2):
            matches.append((key, answer))
    if matches:
        best = matches[0]
        return best[1] + f"\n\n(سوال شما نزدیک به: {best[0]})"
    return None

# ================================
# پاسخ AI (دوزبانه + خطایابی)
# ================================
def get_ai_answer(question):
    try:
        prompt = (f"Answer in natural American English: {question}"
                  if any(word in question.lower() for word in ["what", "who", "how", "why", "ai", "grok", "elon", "xai", "tesla", "spacex"])
                  else f"پاسخ به فارسی روان و طبیعی: {question}")
        
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",
            messages=[{"role": "user", "content": prompt}],
            max_tokens=150,
            temperature=0.7
        )
        return response.choices[0].message.content.strip()
    except Exception as e:
        return f"متأسفم، خطا در ارتباط با AI: {str(e)}"

# ================================
# شروع بات
# ================================
def main():
    print("=" * 80)
    print("   BOT X - نسخه 2.3")
    print("   دانشنامه کامل + جستجوی هوشمند + دوزبانه")
    print("   ساخته: بهارناز نوری منش (11 ساله، ایران)")
    print("   تعداد سوالات: 105")
    print("=" * 80)
    print("سوالات رو هر جور بخوای بپرس! (برای خروج: exit)")
    print("-" * 80)

    while True:
        try:
            question = input("\nسوالت رو بپرس:\n> ").strip()
            if question.lower() in ["exit", "خروج", "bye", "quit"]:
                print("خداحافظ! Bot X همیشه در خدمتته")
                break
            
            if not question:
                print("لطفاً یه سوال بپرس!")
                continue

            print("\nدر حال جستجو...")
            answer = find_faq_answer(question)
            if not answer:
                print("دانشنامه جواب نداشت، از AI می‌پرسم...")
                answer = get_ai_answer(question)
            
            print("\nجواب:")
            print(f"   {answer}")
            print("\n" + "-" * 80)
            
        except KeyboardInterrupt:
            print("\nخداحافظ!")
            break
        except Exception as e:
            print(f"خطای ناشناخته: {e}")

if __name__ == "__main__":
    main()
